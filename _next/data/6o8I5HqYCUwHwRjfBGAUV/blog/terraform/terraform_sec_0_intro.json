{"pageProps":{"post":{"mdxSource":"var Component=(()=>{var c=Object.create;var o=Object.defineProperty;var d=Object.getOwnPropertyDescriptor;var h=Object.getOwnPropertyNames;var u=Object.getPrototypeOf,p=Object.prototype.hasOwnProperty;var i=a=>o(a,\"__esModule\",{value:!0});var m=(a,s)=>()=>(s||a((s={exports:{}}).exports,s),s.exports),g=(a,s)=>{i(a);for(var t in s)o(a,t,{get:s[t],enumerable:!0})},y=(a,s,t)=>{if(s&&typeof s==\"object\"||typeof s==\"function\")for(let n of h(s))!p.call(a,n)&&n!==\"default\"&&o(a,n,{get:()=>s[n],enumerable:!(t=d(s,n))||t.enumerable});return a},k=a=>y(i(o(a!=null?c(u(a)):{},\"default\",a&&a.__esModule&&\"default\"in a?{get:()=>a.default,enumerable:!0}:{value:a,enumerable:!0})),a);var l=m((I,r)=>{r.exports=_jsx_runtime});var N={};g(N,{default:()=>b,frontmatter:()=>w});var e=k(l()),w={title:\"Terraform and Cybersecurity: A Chill Intro\",date:\"2023-05-01\",tags:[\"Terraform\",\"Cloud\",\"AWS\"],draft:!1,summary:\"An old-timer's take on why managing cloud infrastructure by hand is a security nightmare, and how Terraform can save your bacon.\",images:[]};function f(a={}){let{wrapper:s}=a.components||{};return s?(0,e.jsx)(s,Object.assign({},a,{children:(0,e.jsx)(t,{})})):t();function t(){let n=Object.assign({p:\"p\",blockquote:\"blockquote\",code:\"code\",h2:\"h2\",a:\"a\",span:\"span\",ol:\"ol\",li:\"li\",pre:\"pre\"},a.components);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(n.p,{children:\"Picture this: It's 2007, and I'm a bright-eyed developer who needs to scale up some servers. What do I do? I send an email to the ops team. Yes, an EMAIL. Like some kind of digital caveman sending smoke signals across the corporate network.\"}),(0,e.jsx)(n.blockquote,{children:(0,e.jsx)(n.p,{children:'\"Hey Bob, can you please add 2 more instances to the web server pool? Also, can you update the load balancer config? Thanks! - Ted\"'})}),(0,e.jsxs)(n.p,{children:[\"Then I wait. And wait. Maybe Bob is at lunch. Maybe Bob is on vacation. Maybe Bob quit last week and nobody told me. Eventually, Bob (or whoever inherited Bob's inbox) manually clicks through the console or runs \",(0,e.jsx)(n.code,{children:\"vim\"}),\" on the prod server, probably while drinking coffee and hoping not to fat-finger a production-killing setting...\"]}),(0,e.jsxs)(n.h2,{id:\"the-nightmare-of-the-revolving-door\",children:[(0,e.jsx)(n.a,{href:\"#the-nightmare-of-the-revolving-door\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"The Nightmare of the Revolving Door\"]}),(0,e.jsx)(n.p,{children:`Now, imagine that manual process in a large company today. It's a straight-up horror show. People come and go. When someone leaves, they take a little slice of \"how things really work\" with them. The new person comes in, looks at the tangled web of manually configured servers and settings, and their face goes pale. This is what I call the \"knowledge gap,\" and it's where security vulnerabilities love to hide. A setting nobody understood, a port left open by mistake, an access key that was supposed to be temporary... you get the picture.`}),(0,e.jsx)(n.p,{children:\"From a security standpoint, letting humans manually change production is like letting a toddler decorate your wedding cake with a permanent marker. It's messy, you can't undo it easily, and good luck figuring out exactly who drew what and when. If something goes wrong\\u2014and it will go wrong\\u2014finding the one tiny change that caused the outage is a painful, expensive treasure hunt.\"}),(0,e.jsxs)(n.h2,{id:\"a-smarter-way-all-hail-infrastructure-as-code\",children:[(0,e.jsx)(n.a,{href:\"#a-smarter-way-all-hail-infrastructure-as-code\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"A Smarter Way: All Hail Infrastructure as Code!\"]}),(0,e.jsxs)(n.p,{children:[\"During a one-on-one, a brilliant fellow at my company, \",(0,e.jsx)(n.a,{href:\"https://www.youtube.com/watch?v=lM9EbLrtwO8\",children:\"Daniel Austin\"}),`, laid down the law. He said, \"Ted, you know what? We can't have people clicking around in the production console. All changes\\u2014every single one\\u2014need to go through Terraform.\"`]}),(0,e.jsx)(n.p,{children:\"That, my friends, was a lightbulb moment.\"}),(0,e.jsx)(n.p,{children:\"Terraform is an Infrastructure as Code (IaC) tool. In simple English, it lets you write down what you want your cloud infrastructure to look like in a simple text file. No more clicking. You write a blueprint, and Terraform builds it.\"}),(0,e.jsxs)(n.h2,{id:\"the-real-security-wins\",children:[(0,e.jsx)(n.a,{href:\"#the-real-security-wins\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"The Real Security Wins\"]}),(0,e.jsx)(n.p,{children:'This \"code-first\" approach is a security game-changer for a few huge reasons:'}),(0,e.jsxs)(n.ol,{children:[(0,e.jsx)(n.li,{children:(0,e.jsx)(n.p,{children:\"Audits Are No Longer a Nightmare: Every change to your infrastructure is now a code change stored in Git. You can see who proposed the change, who approved it, and exactly what it does. It's a perfect audit trail.\"})}),(0,e.jsx)(n.li,{children:(0,e.jsx)(n.p,{children:\"Mistakes are Reversible: Did a change break something? No problem. Just revert the code in Git and run Terraform again. Poof! You're back to the last known good state.\"})}),(0,e.jsx)(n.li,{children:(0,e.jsx)(n.p,{children:\"The Fortress With No (Public) Doors: Daniel's point goes even deeper. If all changes happen via code, why do we even need to log into our production servers? We probably don't! We can build servers that don't even have the SSH service running. This massively reduces your attack surface.\"})})]}),(0,e.jsxs)(n.p,{children:['For emergencies, you can use modern \"Just-In-Time\" (JIT) access. Funnily enough, AWS rolled this out using AWS Systems Manager in 2025(',(0,e.jsx)(n.a,{href:\"https://aws.amazon.com/blogs/mt/introducing-just-in-time-node-access-using-aws-systems-manager/\",children:\"Introducing Just-in-time node access using AWS Systems Manager\"}),\"). It lets you grant temporary, audited access to a server when you really need it. (I'm still waiting for some other cloud providers in our market to catch up. Ahem, looking at you, Tencent Cloud. Harrumph). Let's put a pin in that for now, I may write a future post on JIT access, because it's just that cool.\"]}),(0,e.jsxs)(n.h2,{id:\"lets-cook-code-you-can-actually-run\",children:[(0,e.jsx)(n.a,{href:\"#lets-cook-code-you-can-actually-run\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Let's Cook: Code You Can Actually Run!\"]}),(0,e.jsx)(n.p,{children:`Talk is cheap. Let's write some code (or should I say \"Code is cheap, show me the talk\" in this AI age?). This HCL (HashiCorp Configuration Language) is for AWS and should work fine on a free tier account.`}),(0,e.jsx)(n.p,{children:\"First, let's create a S3 bucket as following, but make it crystal clear why it's secure. We'll create a private, encrypted bucket to store our secret cat pictures.\"}),(0,e.jsx)(n.pre,{className:\"language-hcl\",children:(0,e.jsxs)(n.code,{className:\"language-hcl code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token keyword\",children:[\"resource \",(0,e.jsx)(n.span,{className:\"token type variable\",children:'\"aws_s3_bucket\"'})]}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"supasaf_bucket\"'}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token property\",children:\"bucket\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"my-secure-bucket\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token property\",children:\"acl\"}),\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"private\"'}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"server_side_encryption_configuration\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"rule\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"apply_server_side_encryption_by_default\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token property\",children:\"sse_algorithm\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"aws:kms\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token property\",children:\"kms_master_key_id\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"=\"}),` aws_kms_key.supasaf_key.arn\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token keyword\",children:[\"resource \",(0,e.jsx)(n.span,{className:\"token type variable\",children:'\"aws_kms_key\"'})]}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"supasaf_key\"'}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token property\",children:\"description\"}),\"             \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"KMS key for S3 bucket\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token property\",children:\"deletion_window_in_days\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"7\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,e.jsxs)(n.h2,{id:\"the-takeaway-stop-living-in-the-stone-age\",children:[(0,e.jsx)(n.a,{href:\"#the-takeaway-stop-living-in-the-stone-age\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"The Takeaway? Stop Living in the Stone Age!\"]}),(0,e.jsx)(n.p,{children:`So, what\\u2019s the real point here? As an InfoSec dinosaur. I remember when \"high availability\" meant you had a spare server in a dusty closet and a phone number to call at 3 AM. I have seen more production outages caused by a well-meaning admin with a case of \"fat fingers\" than I can count. These incidents aren't just funny stories we tell over beers; they're scars on my soul.`}),(0,e.jsx)(n.p,{children:\"That\\u2019s why I get so passionate about tools like Terraform. It\\u2019s not just about being \\u201Cmodern\\u201D; it\\u2019s about finally getting a good night's sleep. It's a safety net for your sanity.\"}),(0,e.jsx)(n.p,{children:`So if you're still in the business of emailing \"Bob the Admin\" and praying he doesn't trip over a power cord, I truly hope this post gives you a little nudge. Step out of the cave. Your blood pressure will thank you.`})]})}}var b=f;return N;})();\n;return Component;","toc":[{"value":"The Nightmare of the Revolving Door","url":"#the-nightmare-of-the-revolving-door","depth":2},{"value":"A Smarter Way: All Hail Infrastructure as Code!","url":"#a-smarter-way-all-hail-infrastructure-as-code","depth":2},{"value":"The Real Security Wins","url":"#the-real-security-wins","depth":2},{"value":"Let's Cook: Code You Can Actually Run!","url":"#lets-cook-code-you-can-actually-run","depth":2},{"value":"The Takeaway? Stop Living in the Stone Age!","url":"#the-takeaway-stop-living-in-the-stone-age","depth":2}],"frontMatter":{"readingTime":{"text":"5 min read","minutes":4.78,"time":286800,"words":956},"slug":"terraform/terraform_sec_0_intro","fileName":"terraform/terraform_sec_0_intro.md","title":"Terraform and Cybersecurity: A Chill Intro","date":"2023-05-01T00:00:00.000Z","tags":["Terraform","Cloud","AWS"],"draft":false,"summary":"An old-timer's take on why managing cloud infrastructure by hand is a security nightmare, and how Terraform can save your bacon.","images":[]}},"authorDetails":[{"readingTime":{"text":"1 min read","minutes":0.72,"time":43200,"words":144},"slug":["default"],"fileName":"default.md","name":"Ted","avatar":"/static/images/avatar.jpg","occupation":"CISSP, CKS, AWS Certified Security – Specialty, Microsoft Cybersecurity Architect Expert","email":"nerd@supasaf.com","twitter":"https://twitter.com/supasaf","date":null}],"prev":null,"next":{"title":"Harnessing AWS IAM and Terraform for Enhanced Cybersecurity","date":"2023-05-13T00:00:00.000Z","tags":["Terraform","Cloud","AWS"],"draft":false,"summary":"An old-timer's guide to using Terraform to manage who gets to touch what in your AWS account. Learn about IAM users, policies, groups, and roles without falling asleep.","slug":"terraform/terraform_sec_1_iam0"}},"__N_SSG":true}