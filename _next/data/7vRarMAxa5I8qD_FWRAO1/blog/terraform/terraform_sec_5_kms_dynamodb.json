{"pageProps":{"post":{"mdxSource":"var Component=(()=>{var o=Object.create;var i=Object.defineProperty;var d=Object.getOwnPropertyDescriptor;var p=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty;var r=a=>i(a,\"__esModule\",{value:!0});var h=(a,s)=>()=>(s||a((s={exports:{}}).exports,s),s.exports),y=(a,s)=>{r(a);for(var c in s)i(a,c,{get:s[c],enumerable:!0})},N=(a,s,c)=>{if(s&&typeof s==\"object\"||typeof s==\"function\")for(let n of p(s))!u.call(a,n)&&n!==\"default\"&&i(a,n,{get:()=>s[n],enumerable:!(c=d(s,n))||c.enumerable});return a},k=a=>N(r(i(a!=null?o(m(a)):{},\"default\",a&&a.__esModule&&\"default\"in a?{get:()=>a.default,enumerable:!0}:{value:a,enumerable:!0})),a);var l=h((w,t)=>{t.exports=_jsx_runtime});var b={};y(b,{default:()=>f,frontmatter:()=>g});var e=k(l()),g={title:\"Securing DynamoDB with Terraform and AWS KMS: A Cybersecurity Perspective\",date:\"2023-06-28\",tags:[\"Terraform\",\"Cloud\",\"AWS\"],draft:!0,summary:\"Using AWS Key Management Service (KMS) and Terraform to enhance the security of data storage in AWS DynamoDB, providing visibility, automation, and encryption to protect sensitive information.\"};function _(a={}){let{wrapper:s}=a.components||{};return s?(0,e.jsx)(s,Object.assign({},a,{children:(0,e.jsx)(c,{})})):c();function c(){let n=Object.assign({p:\"p\",pre:\"pre\",code:\"code\",span:\"span\"},a.components);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(n.p,{children:\"As technology continues to advance and businesses increasingly rely on data, it's critical to ensure that data is stored securely and safely. In my time working at a fast-growing technology company, I've seen the importance of securing data storage, particularly when it comes to cloud services. That's where AWS Key Management Service (KMS) and Terraform come in, helping to secure your data in AWS DynamoDB.\"}),(0,e.jsx)(n.p,{children:\"DynamoDB is a fully managed NoSQL database service provided by Amazon Web Services that can handle high traffic loads and scale seamlessly. While it is an excellent solution for storing data, it's essential to ensure that sensitive information is protected. AWS KMS is a managed service that allows you to create and manage cryptographic keys, which can be used to encrypt and decrypt data stored in DynamoDB.\"}),(0,e.jsx)(n.p,{children:\"Terraform, an open-source Infrastructure as Code (IaC) tool, makes it easy to manage and deploy your AWS infrastructure, including DynamoDB and KMS resources. Here's a simple Terraform script that creates a DynamoDB table with server-side encryption enabled using a KMS key:\"}),(0,e.jsx)(n.pre,{className:\"language-hcl\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-hcl\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token keyword\",children:[\"resource \",(0,e.jsx)(n.span,{className:\"token type variable\",children:'\"aws_kms_key\"'})]}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"dynamodb_key\"'}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token property\",children:\"description\"}),\"             \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"KMS key for DynamoDB\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token property\",children:\"deletion_window_in_days\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"7\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token keyword\",children:[\"resource \",(0,e.jsx)(n.span,{className:\"token type variable\",children:'\"aws_dynamodb_table\"'})]}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"secure_table\"'}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token property\",children:\"name\"}),\"           \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"example-secure-table\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token property\",children:\"billing_mode\"}),\"   \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"PAY_PER_REQUEST\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token property\",children:\"hash_key\"}),\"       \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"id\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token property\",children:\"stream_enabled\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token boolean\",children:\"true\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token property\",children:\"stream_view_type\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"NEW_AND_OLD_IMAGES\"'}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"attribute\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token property\",children:\"name\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"id\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token property\",children:\"type\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"S\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"server_side_encryption\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token property\",children:\"enabled\"}),\"     \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token boolean\",children:\"true\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token property\",children:\"kms_key_arn\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"=\"}),` aws_kms_key.dynamodb_key.arn\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,e.jsx)(n.p,{children:\"By storing your infrastructure code in a version control system and using Terraform's declarative language, you gain full visibility into your infrastructure setup and reduce the likelihood of security vulnerabilities due to misunderstandings. Terraform's modular design and reusable code components also make it easier to enforce security best practices across your infrastructure, minimizing potential risks.\"}),(0,e.jsx)(n.p,{children:\"Using AWS KMS to encrypt data in DynamoDB ensures that only authorized users can access sensitive information. This added layer of security is particularly important as you scale your infrastructure and handle a growing volume of data. In addition, integrating Terraform with security monitoring and auditing tools enables you to proactively identify and address security issues, ensuring that your infrastructure remains resilient to potential threats.\"}),(0,e.jsx)(n.p,{children:\"Here's an example of how you can use Terraform to configure an AWS CloudTrail trail to monitor activity on your KMS key:\"}),(0,e.jsx)(n.pre,{children:(0,e.jsxs)(n.code,{className:\"code-highlight\",children:[(0,e.jsx)(n.span,{className:\"code-line\",children:`resource \"aws_s3_bucket\" \"cloudtrail_bucket\" {\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`  bucket = \"my-kms-cloudtrail-bucket\"\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`  acl    = \"private\"\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`  versioning {\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`    status = \"Enabled\"\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`  }\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`}\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`resource \"aws_cloudtrail\" \"kms_trail\" {\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`  name           = \"kms-example-trail\"\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`  s3_bucket_name = aws_s3_bucket.cloudtrail_bucket.id\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`  event_selector {\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`    read_write_type           = \"All\"\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`    include_management_events = true\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`    data_resource {\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`      type = \"AWS::KMS::Key\"\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`      values = [aws_kms_key.dynamodb_key.arn]\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`    }\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`  }\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`}\n`})]})}),(0,e.jsx)(n.p,{children:\"By leveraging Terraform, AWS KMS, and DynamoDB, you can enhance the security posture of your data storage and management in the cloud. This approach provides greater visibility, consistency, and automation, allowing you to mitigate the risks associated with traditional infrastructure management and personnel transitions. Stay tuned for the next blog post in this series, where we'll explore more ways to secure your Terraform code and manage sensitive data in the cloud.\"})]})}}var f=_;return b;})();\n;return Component;","toc":[],"frontMatter":{"readingTime":{"text":"4 min read","minutes":3.15,"time":189000,"words":630},"slug":"terraform/terraform_sec_5_kms_dynamodb","fileName":"terraform/terraform_sec_5_kms_dynamodb.md","title":"Securing DynamoDB with Terraform and AWS KMS: A Cybersecurity Perspective","date":"2023-06-28T00:00:00.000Z","tags":["Terraform","Cloud","AWS"],"draft":true,"summary":"Using AWS Key Management Service (KMS) and Terraform to enhance the security of data storage in AWS DynamoDB, providing visibility, automation, and encryption to protect sensitive information."}},"authorDetails":[{"readingTime":{"text":"1 min read","minutes":0.635,"time":38100,"words":127},"slug":["default"],"fileName":"default.md","name":"L.W.J","avatar":"/static/images/avatar.png","occupation":"CISSP, Cybersecurity, Cloud and WASM","email":"bGl3ZWlqaWFuLmh1c3RAZ21haWwuY29t@decode-in-base64","twitter":"https://twitter.com/supasaf","date":null}],"prev":{"title":"Bastion Hosts: Safeguarding Your Cloud Resources","date":"2023-06-26T00:00:00.000Z","tags":["Terraform","Cloud","AWS"],"draft":false,"summary":"Discover the significance of bastion hosts in cloud security and learn how to set up a secure gateway using Terraform in AWS, ensuring protection for private resources while reducing the attack surface area.","slug":"terraform/terraform_sec_4_bastion"},"next":null},"__N_SSG":true}